# 모드와 기본 내비게이션

**이전**: [소개와 철학](./01_Introduction_and_Philosophy.md) | **다음**: [필수 편집](./03_Essential_Editing.md)

---

## 학습 목표

이 레슨을 완료하면 다음을 할 수 있습니다:

1. 일반 모드(Normal), 삽입 모드(Insert), 명령줄 모드(Command-line), 교체 모드(Replace)를 식별하고 전환하기
2. 화살표 키 대신 `h`, `j`, `k`, `l`을 사용해 내비게이션하기
3. 일반 모드(Normal Mode)가 기본값인 이유와 돌아가는 방법 설명하기
4. 기본 명령줄 모드(Command-line Mode) 명령 사용하기 (`:w`, `:q`, `:wq`, `:q!`)
5. 화면 하단의 모드 표시기(mode indicator) 인식하기

---

Vim에서 가장 중요한 개념은 **모드(modes)**입니다. 초보자가 겪는 모든 좌절감 — "타이핑이 안 돼!", "왜 글자가 사라지지!", "어떻게 종료하지?!" — 은 자신이 어떤 모드에 있는지 이해하지 못한 데서 비롯됩니다. 모드 인식을 마스터하면 나머지는 저절로 따라옵니다.

## 목차

1. [모드 이해하기](#1-모드-이해하기)
2. [일반 모드 — 홈 베이스](#2-일반-모드--홈-베이스)
3. [삽입 모드 — 텍스트 추가](#3-삽입-모드--텍스트-추가)
4. [명령줄 모드](#4-명령줄-모드)
5. [교체 모드](#5-교체-모드)
6. [hjkl을 사용한 기본 내비게이션](#6-hjkl을-사용한-기본-내비게이션)
7. [횟수와 이동 결합하기](#7-횟수와-이동-결합하기)
8. [첫날 필수 명령어](#8-첫날-필수-명령어)
9. [요약](#9-요약)

---

## 1. 모드 이해하기

Vim에는 여러 모드가 있지만, 주로 사용하는 것은 네 가지입니다:

```
                    ┌──────────────┐
          i,a,o     │              │    Esc
        ┌──────────▶│  INSERT MODE │──────────┐
        │           │              │           │
        │           └──────────────┘           │
        │                                      ▼
  ┌─────┴────────┐                    ┌──────────────┐
  │              │◀───────────────────│              │
  │ NORMAL MODE  │       Esc          │ VISUAL MODE  │
  │  (default)   │───────────────────▶│              │
  │              │      v, V, Ctrl-V  └──────────────┘
  └─────┬────────┘
        │           ┌──────────────┐           ▲
        │    :,/,?  │  COMMAND-LINE│           │
        └──────────▶│     MODE     │───────────┘
                    │              │   Esc / Enter
                    └──────────────┘
```

**핵심 규칙**: `Esc`를 누르면 항상 일반 모드(Normal Mode)로 돌아옵니다. 헷갈리면 `Esc`를 누르세요.

---

## 2. 일반 모드 — 홈 베이스

일반 모드(Normal Mode)는 가장 많은 시간을 보내는 곳입니다. 일반 모드에서는 모든 키가 문자를 입력하는 것이 아니라 **명령(command)**으로 동작합니다.

### 일반 모드 진입

| 출발 모드 | 누를 키 | 참고 |
|-----------|---------|------|
| 삽입 모드(Insert mode) | `Esc` 또는 `Ctrl-[` | `Ctrl-[`이 더 빠름 (Esc 키까지 손을 뻗을 필요 없음) |
| 비주얼 모드(Visual mode) | `Esc` | 일반 모드로 복귀 |
| 명령줄 모드(Command-line mode) | `Esc` | 명령을 취소함 |
| 어느 모드에서나 | `Esc` `Esc` | 두 번 누르면 항상 안전 |

### 일반 모드가 기본값인 이유

파일을 열면 Vim은 일반 모드(Normal Mode)로 시작합니다. 곧바로 타이핑을 시작하려는 초보자에게는 당혹스러운 일입니다. 이유는: **파일을 열 때는 처음부터 새로 작성하는 것이 아니라 읽거나 수정하는 경우가 대부분**이기 때문입니다. 일반 모드에서는 즉시 내비게이션, 검색, 편집을 시작할 수 있습니다.

### 모드 표시기

Vim 창의 왼쪽 하단을 확인하세요:

```
-- INSERT --        ← 삽입 모드(Insert mode) 상태
-- VISUAL --        ← 비주얼 모드(Visual mode) 상태
-- VISUAL LINE --   ← 줄 단위 비주얼 모드(Line-wise Visual mode) 상태
-- VISUAL BLOCK --  ← 블록 비주얼 모드(Block Visual mode) 상태
:                   ← 명령줄 모드(Command-line mode) 상태
(아무것도 없음)      ← 일반 모드(Normal mode) 상태 (표시기 없음)
```

---

## 3. 삽입 모드 — 텍스트 추가

삽입 모드(Insert Mode)는 Vim이 "일반적인" 편집기처럼 동작하는 모드입니다 — 키를 누르면 문자가 입력됩니다.

### 삽입 모드 진입 방법

| 키 | 동작 | 연상법 |
|----|------|--------|
| `i` | 커서 앞에 삽입 | **i**nsert |
| `a` | 커서 뒤에 삽입 | **a**ppend |
| `I` | 줄 맨 앞에 삽입 | **I**nsert at start |
| `A` | 줄 맨 끝에 삽입 | **A**ppend to end |
| `o` | 아래에 새 줄 열기 | **o**pen below |
| `O` | 위에 새 줄 열기 | **O**pen above |

각 명령은 삽입 모드(Insert Mode)로 진입하기 전에 커서를 다른 위치에 놓습니다. 지금은 `i`(커서 위치에 삽입)와 `Esc`(일반 모드로 복귀)만 기억하면 됩니다.

### 삽입 모드 빠져나오기

| 키 | 동작 |
|----|------|
| `Esc` | 일반 모드(Normal Mode)로 복귀 |
| `Ctrl-[` | Esc와 동일 (누르기 더 편함) |
| `Ctrl-c` | 일반 모드로 복귀 (약어(abbreviation) 트리거 건너뜀) |

**프로 팁**: 많은 Vim 사용자들은 `Caps Lock`을 `Esc` (또는 `Ctrl`)로 리매핑합니다. 홈 로우(home row)에 더 가깝기 때문입니다. 방법은 [레슨 12](./12_Configuration_and_Vimrc.md)에서 배울 수 있습니다.

---

## 4. 명령줄 모드

일반 모드(Normal Mode)에서 `:`를 누르면 명령줄 모드(Command-Line Mode)로 진입합니다. 화면 하단에 `:` 프롬프트가 나타나고 여기서 명령을 입력합니다.

### 필수 명령어

| 명령 | 동작 | 연상법 |
|------|------|--------|
| `:w` | 파일 저장(쓰기) | **w**rite |
| `:q` | Vim 종료 | **q**uit |
| `:wq` | 저장 후 종료 | **w**rite + **q**uit |
| `:q!` | 저장하지 않고 강제 종료 | **q**uit + force |
| `:w filename` | 새 파일명으로 저장 | **w**rite to file |
| `:e filename` | 파일 열기(편집) | **e**dit |
| `:help topic` | 특정 주제의 도움말 열기 | |

### "Vim을 어떻게 종료하나요?" 문제

이것은 Vim에서 가장 많이 검색되는 질문입니다 — Stack Overflow에서 270만 번 이상 조회된 유명한 질문이 되기도 했습니다. 이제 여러분은 알게 되었습니다:

```
:q       ← 종료 (저장되지 않은 변경이 있으면 실패)
:q!      ← 변경 사항을 버리고 강제 종료
:wq      ← 저장 후 종료
ZZ       ← 저장 후 종료 (일반 모드 단축키)
ZQ       ← 저장하지 않고 종료 (일반 모드 단축키)
```

---

## 5. 교체 모드

덜 사용되지만 유용한 모드: 교체 모드(Replace Mode)는 타이핑하면서 기존 문자를 덮어씁니다.

| 키 | 동작 |
|----|------|
| `r` | 커서 아래 단일 문자 교체 (일반 모드 유지) |
| `R` | 교체 모드(Replace Mode) 진입 (Esc를 누를 때까지 덮어쓰기) |

```
Before: Hello World     (커서가 'W' 위에 있음)
r+w:    Hello world     (W를 w로 교체 후 일반 모드로 복귀)

Before: Hello World     (커서가 'W' 위에 있음)
R:      Hello there     ('there'를 타이핑하면 'World'를 덮어씀, Esc로 중지)
```

---

## 6. hjkl을 사용한 기본 내비게이션

일반 모드(Normal Mode)에서 다음 키로 커서를 이동합니다:

```
          k
          ↑
     h ←     → l
          ↓
          j
```

| 키 | 방향 | 연상법 |
|----|------|--------|
| `h` | 왼쪽 | 가장 왼쪽 키 |
| `j` | 아래 | "**j**umps down" (j가 기준선 아래로 내려감) |
| `k` | 위 | "**k**icks up" |
| `l` | 오른쪽 | 가장 오른쪽 키 |

### 화살표 키를 쓰지 않는 이유

Vim에서 화살표 키도 동작하지만, `hjkl`에는 다음과 같은 장점이 있습니다:

1. **홈 로우(Home row)** — 손가락이 타이핑 위치를 벗어나지 않음
2. **속도** — 키보드 가로질러 손을 뻗을 필요 없음
3. **조합성(Composability)** — `hjkl`은 횟수 및 연산자(operator)와 함께 작동함 (예: `5j` = 5줄 아래로 이동)
4. **범용성** — 많은 Vim 유사 도구들이 `hjkl`만 지원함

### 연습 훈련

첫날부터 `hjkl`을 사용하도록 강제하세요. 약 일주일 정도 어색하지만 그 후에는 자연스러워집니다. 이를 강제하려면 `.vimrc`에서 화살표 키를 비활성화할 수 있습니다:

```vim
" Disable arrow keys to force hjkl habit
noremap <Up>    <Nop>
noremap <Down>  <Nop>
noremap <Left>  <Nop>
noremap <Right> <Nop>
```

---

## 7. 횟수와 이동 결합하기

강력한 기능: 이동 명령 앞에 **횟수(count)**를 붙여 반복할 수 있습니다.

| 명령 | 동작 |
|------|------|
| `5j` | 5줄 아래로 이동 |
| `10l` | 오른쪽으로 10칸 이동 |
| `3k` | 3줄 위로 이동 |
| `20h` | 왼쪽으로 20칸 이동 |

이 패턴 — **횟수 + 명령** — 은 Vim 전반에 걸쳐 등장합니다. Vim의 조합 가능한 명령 언어(composable command language)의 시작입니다.

### 줄 번호 내비게이션

줄 번호가 표시된 상태(`:set number`)에서 바로 이동할 수 있습니다:

| 명령 | 동작 |
|------|------|
| `:42` | 42번째 줄로 이동 |
| `42G` | 42번째 줄로 이동 (일반 모드) |
| `gg` | 첫 번째 줄로 이동 |
| `G` | 마지막 줄로 이동 |

---

## 8. 첫날 필수 명령어

Vim 첫날을 버티기 위한 최소한의 명령어 세트입니다:

### 열기와 닫기

```bash
vim filename    # 파일 열기
vim             # 빈 버퍼로 Vim 열기
```

### Vim 내부

```
i       → 삽입 모드(Insert Mode) 진입 (타이핑 시작)
Esc     → 일반 모드(Normal Mode)로 복귀

h/j/k/l → 커서 이동 (왼쪽/아래/위/오른쪽)

:w      → 저장
:q      → 종료
:wq     → 저장 후 종료
:q!     → 저장하지 않고 종료

u       → 실행 취소
Ctrl-r  → 다시 실행
```

### 완전한 편집 세션 예시

```
1. vim hello.txt          ← 파일 열기 (또는 생성)
2. i                      ← 삽입 모드 진입
3. Hello, Vim!            ← 텍스트 입력
4. Esc                    ← 일반 모드로 복귀
5. :wq                    ← 저장 후 종료
```

이것으로 Vim에서 파일을 생성하고 편집할 수 있습니다.

---

## 9. 요약

| 개념 | 핵심 사항 |
|------|-----------|
| 일반 모드(Normal mode) | 기본 모드; 키는 문자가 아닌 명령으로 동작 |
| 삽입 모드(Insert mode) | `i`로 진입, `Esc`로 종료; 평소처럼 텍스트 입력 |
| 명령줄 모드(Command-line mode) | `:`로 진입; `:w` 저장, `:q` 종료, `:wq` 둘 다 |
| 교체 모드(Replace mode) | `r`로 한 글자, `R`로 연속 덮어쓰기 |
| 내비게이션 | `h`(←) `j`(↓) `k`(↑) `l`(→); 화살표 키보다 선호 |
| 횟수(Counts) | `5j` = 5줄 아래로; 횟수 + 명령 패턴 |
| 황금 규칙 | 헷갈리면 `Esc`를 눌러 일반 모드로 돌아가기 |

---

## 연습 문제

### 연습 문제 1: 모드 식별하기

`vim notes.txt`로 파일을 엽니다. 각 시나리오에서 어떤 키를 눌러야 하는지 답하세요:

1. 현재 커서 위치에서 타이핑을 시작하고 싶습니다.
2. 텍스트를 입력했지만 일반 모드(Normal mode)로 돌아가고 싶습니다.
3. 현재 줄 아래에 새 줄을 추가하고 타이핑을 시작하고 싶습니다.
4. 일반 모드(Normal mode)에서 파일을 저장하고 싶습니다.

<details>
<summary>정답 보기</summary>

1. `i`를 누릅니다 — 현재 문자 앞에서 삽입 모드(Insert mode)로 진입합니다.
2. `Esc` (또는 `Ctrl-[`)를 누릅니다 — 어떤 모드에서든 일반 모드(Normal mode)로 돌아갑니다.
3. `o`를 누릅니다 — 아래에 새 빈 줄을 열고 삽입 모드(Insert mode)로 진입합니다.
4. `:w`를 입력하고 `Enter`를 누릅니다 — `:`가 명령줄 모드(Command-line mode)로 진입시키고, `w`가 파일을 씁니다.

</details>

### 연습 문제 2: hjkl 내비게이션

현재 위치에서 시작하여 각 이동을 달성하는 키 시퀀스를 작성하세요 (화살표 키 없이 `hjkl`만 사용):

1. 7줄 아래로 이동.
2. 왼쪽으로 3칸 이동.
3. 파일의 마지막 줄로 이동.
4. 파일의 첫 번째 줄로 이동.

<details>
<summary>정답 보기</summary>

1. `7j` — 횟수(7) 다음에 방향(j = 아래).
2. `3h` — 횟수(3) 다음에 방향(h = 왼쪽).
3. `G` — 대문자 G는 마지막 줄로 점프합니다.
4. `gg` — 소문자 g 두 번은 첫 번째 줄로 점프합니다.

</details>

### 연습 문제 3: 교체 모드 vs. 삭제 후 삽입

다음 줄이 있습니다: `The cat sat on the mat`

커서가 `cat`의 `c` 위에 있습니다. `cat`을 `dog`으로 바꾸고 싶습니다. 두 가지 방법을 설명하세요:

- 방법 A: 교체 모드(`r` 또는 `R`) 사용
- 방법 B: 교체 모드 사용 없이

<details>
<summary>정답 보기</summary>

**방법 A (교체 모드)**:
- `R`을 눌러 교체 모드(Replace mode)로 진입합니다.
- `dog`을 입력합니다 — `cat`을 문자 하나씩 `dog`으로 덮어씁니다.
- `Esc`를 눌러 일반 모드(Normal mode)로 돌아옵니다.

**방법 B (삭제 후 삽입)**:
- `x`를 세 번 (또는 `3x`) 눌러 `cat`을 삭제합니다.
- `i`를 눌러 삽입 모드(Insert mode)로 진입합니다.
- `dog`을 입력합니다.
- `Esc`를 누릅니다.

방법 A는 교체 대상과 원본의 길이가 같을 때 더 간결합니다. 레슨 3에서 더 강력한 방법(`cw` — 단어 변경)을 배울 것입니다.

</details>

### 연습 문제 4: 저장과 종료 변형

각 시나리오에 맞는 올바른 명령을 연결하세요:

1. 변경 사항을 저장하고 종료하고 싶습니다.
2. 변경 사항이 잘못된 것을 깨달아 모두 버리고 종료하고 싶습니다.
3. 파일을 저장하되 계속 편집하고 싶습니다.
4. 변경 사항이 없고 그냥 파일을 닫고 싶습니다.

<details>
<summary>정답 보기</summary>

1. `:wq` (또는 일반 모드에서 `ZZ`) — 쓰기 후 종료.
2. `:q!` (또는 일반 모드에서 `ZQ`) — 변경 사항을 버리고 강제 종료.
3. `:w` — 종료 없이 쓰기(저장).
4. `:q` — 종료; 저장되지 않은 변경이 없을 때 정상적으로 작동.

</details>

### 연습 문제 5: 모드 표시기 도전

Vim(`vim`)을 열고 모드를 전환하면서 각 단계 후 화면 하단의 표시기를 확인하세요:

1. Vim을 엽니다 — 왼쪽 하단에 무엇이 표시됩니까?
2. `i`를 누릅니다 — 무엇이 바뀝니까?
3. `Esc`를 누릅니다 — 무엇이 되돌아옵니까?
4. `v`를 누릅니다 — 이제 무엇이 나타납니까?
5. `Esc`를 누른 후 `:` — 하단에 무엇이 나타납니까?

<details>
<summary>정답 보기</summary>

1. 아무것도 없음(빈 공간) — 일반 모드(Normal mode)는 기본적으로 표시기가 없습니다.
2. 왼쪽 하단에 `-- INSERT --`가 나타납니다.
3. 표시기가 사라집니다 (일반 모드로 복귀).
4. `-- VISUAL --`이 나타납니다 — 문자 단위 비주얼 모드(Visual mode) 상태입니다.
5. `Esc` 후 일반 모드로 돌아가고, `:`를 누르면 맨 아래에 `:` 프롬프트가 나타납니다 — 명령줄 모드(Command-line mode)입니다.

</details>

---

**이전**: [소개와 철학](./01_Introduction_and_Philosophy.md) | **다음**: [필수 편집](./03_Essential_Editing.md)
